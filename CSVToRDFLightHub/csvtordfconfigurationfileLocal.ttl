#Se empiezan cargando los prefix que se usar?n en el RDF generado
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.
@prefix rr: <http://www.w3.org/ns/r2rml#>.
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.
@prefix ql: <http://semweb.mmlab.be/ns/ql#> .
@prefix rml: <http://semweb.mmlab.be/ns/rml#> .
@prefix schema: <http://schema.org/> .
@prefix lod: <http://localhost:8080/linkeddata/id/> .
@prefix geo: <http://www.w3.org/2003/01/geo/wgs84_pos#> .
@prefix km4c: <http://www.disit.org/km4city/schema#>.
@prefix w3-time: <http://www.w3.org/2006/>.
@prefix ns10:	<http://dbpedia.org/datatype/>. 

#Se define por cada sujeto un bloque en el que se podran anadir todos los 
#predicados y objetos necesarios
<#PrimerBloque>
	rml:logicalSource [
		rml:source "newdata/SML_consumo_por_mes_hub.csv";
        rml:referenceFormulation ql:CSV
    ];
    
 	rr:subjectMap [
        rr:template "http://{Environment}:{Port}/linkeddata/id/{Localizacion}/light-hub/{Poligono}/{NombreParaURI}/{Year}/{Month}";
        rr:class km4c:Smart_street_light;
        rr:class lod:light_hub;
    ];
    
	 km4c:predicateObjectMap [
      rr:predicate km4c:areaName;
         rr:objectMap [
    	    rml:reference "Station";
    	    km4c:datatype xsd:string;
     ]
	];
	 rr:predicateObjectMap [
        rr:predicate lod:kilowatt;
        rr:objectMap [
            rml:reference "Kilowatts";
            rr:datatype ns10:kilowatt;
        ]
        ];
	rr:predicateObjectMap [
        rr:predicate lod:MonthText;
        rr:objectMap [
            rml:reference "MonthText";
            rr:datatype xsd:string;
        ]
	].
   
  <#Year>
	rml:logicalSource[
		rml:source "newdata/SML_consumo_por_mes_hub.csv";
        rml:referenceFormulation ql:CSV
    ];
    
 	rr:subjectMap [
        rr:template "http://{Environment}:{Port}/linkeddata/id/{Localizacion}/light-hub/{Poligono}/{NombreParaURI}/{Year}";
		rr:class schema:gYear;
    ];
    rr:predicateObjectMap [
    	rr:predicate rdfs:label;
        rr:objectMap [
    	    rml:reference "Station";
        ]
     ];   
    rr:predicateObjectMap [
        rr:predicate schema:gMonth;
        rr:objectMap [
             rr:parentTriplesMap <#Month>
        ]
	].

<#Month>
	rml:logicalSource[
		rml:source "newdata/SML_consumo_por_mes_hub.csv";
        rml:referenceFormulation ql:CSV
    ];
    
 	rr:subjectMap [
        rr:template "http://{Environment}:{Port}/linkeddata/id/{Localizacion}/light-hub/{Poligono}/{NombreParaURI}/{Year}/{Month}";
		rr:class schema:gYear;
    ];
     rr:predicateObjectMap [
    	rr:predicate rdfs:label;
        rr:objectMap [
    	    rml:reference "Year";
        ]
     ];   
    rr:predicateObjectMap [
        rr:predicate lod:Month;
        rr:objectMap [
            rml:reference "Month";
            rr:datatype xsd:gMonth;
        ]
    ].
      
	
<#Locali>
	rml:logicalSource[
		rml:source "newdata/SML_consumo_por_mes_hub.csv";
        rml:referenceFormulation ql:CSV
    ];
    
 	rr:subjectMap [
        rr:template "http://{Environment}:{Port}/linkeddata/id/{Localizacion}/light-hub/{Poligono}/{NombreParaURI}";
		rr:class km4c:areaName;
    ];
   
     rr:predicateObjectMap [
        rr:predicate rdfs:label;
        rr:objectMap [
    	    rml:reference "Localizacion";
     ]
	];
     
     rr:predicateObjectMap [
        rr:predicate schema:gYear;
        rr:objectMap [
             rr:parentTriplesMap <#Year>
        ]
	].
	
<#Polig>
	rml:logicalSource[
		rml:source "newdata/SML_consumo_por_mes_hub.csv";
        rml:referenceFormulation ql:CSV
    ];
    
 	rr:subjectMap [
        rr:template "http://{Environment}:{Port}/linkeddata/id/{Localizacion}/light-hub/{Poligono}";
		rr:class geo:location;
    ];
   
     
      rr:predicateObjectMap [
        rr:predicate rdfs:label;
        rr:objectMap [
    	    rml:reference "Poligono";
     ]
	];
     
     rr:predicateObjectMap [
        rr:predicate geo:location;
        rr:objectMap [
            rr:parentTriplesMap <#Locali>
        ]
	].	
        
        		
<#BloqueLocalizacion>
	rml:logicalSource [
		rml:source "newdata/SML_consumo_por_mes_hub.csv";
    	rml:referenceFormulation ql:CSV
	];
 	
    rr:subjectMap [
        rr:template "http://{Environment}:{Port}/linkeddata/id/{Localizacion}";
        rr:class schema:Place;
    ];
    rr:predicateObjectMap [
        rr:predicate rdfs:label;
        rr:objectMap [
    	    rr:constant "San Sebasti\u00e1n";
        ]
	];
	rr:predicateObjectMap [
        rr:predicate geo:location;
        rr:objectMap [
            rr:parentTriplesMap <#Polig>
        ]
        ].
        
       