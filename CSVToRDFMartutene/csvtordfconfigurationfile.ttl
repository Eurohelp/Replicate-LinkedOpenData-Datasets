@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rr: <http://www.w3.org/ns/r2rml#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix ql: <http://semweb.mmlab.be/ns/ql#> .
@prefix rml: <http://semweb.mmlab.be/ns/rml#> .
@prefix schema: <http://schema.org/> .
@prefix geo: <http://www.w3.org/2003/01/geo/wgs84_pos#> .
@prefix linkedgeodata: <http://linkedgeodata.org/page/ontology/> .
@prefix qb: <http://purl.org/linked-data/cube#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix lod: <http://donostia.eus/linkeddata/id/> .
@prefix lod-medicion: <http://donostia.eus/linkeddata/id/medicion-> .
@prefix purl-measure: <http://purl.org/linked-data/sdmx/2009/measure#> .
@prefix purl-attribute: <http://purl.org/linked-data/sdmx/2009/attribute#> .

#Se define por cada sujeto un bloque en el que se podr?n anadir todos los 
#predicados y objetos necesarios
<#Urumea>
rml:logicalSource [
		rml:source "CSVToRDFMartutene/newdata/martutene.csv";
        rml:referenceFormulation ql:CSV
    ];
 		rr:subjectMap [
        rr:constant "http://donostia.eus/linkeddata/id/urumea";
        rr:class schema:RiverBodyOfWater;
    ];
    	rr:predicateObjectMap [
        rr:predicate rdfs:label;
        rr:objectMap [
            rr:constant "Rio Urumea";
			rr:language "es";
        ]
        ]
        .

<#Observacion>
rml:logicalSource [
		rml:source "CSVToRDFMartutene/newdata/martutene.csv";
        rml:referenceFormulation ql:CSV
    	];
 		rr:subjectMap [
        rr:template "http://donostia.eus/linkeddata/id/urumea-martutene-{fecha}-{horaParaUri}";
        rr:class qb:Observation;
    	];
    	rr:predicateObjectMap [
        rr:predicate dcterms:date;
        rr:objectMap [
            rml:reference "horafecha";
            rr:datatype xsd:dateTime;
        ]
        ];
        rr:predicateObjectMap [
        rr:predicate lod:medicion;
        rr:objectMap [
            rr:constant "http://donostia.eus/linkeddata/id/medicion-riesgo";
            rr:termType rr:IRI;
        ]
        ];
        rr:predicateObjectMap [
        rr:predicate lod:medicion;
        rr:objectMap [
            rr:constant "http://donostia.eus/linkeddata/id/medicion-nivel-agua";
            rr:termType rr:IRI;
        ]
        ];
        rr:predicateObjectMap [
        rr:predicate lod:medicion;
        rr:objectMap [
            rr:constant "http://donostia.eus/linkeddata/id/medicion-temperatura";
            rr:termType rr:IRI;
        ]
        ];
        rr:predicateObjectMap [
        rr:predicate "http://donostia.eus/linkeddata/id/medicion-rio-medicion";
        rr:objectMap [
		rr:parentTriplesMap <#Urumea>;
        ]
        ].

<#Riesgo>
rml:logicalSource [
		rml:source "CSVToRDFMartutene/newdata/martutene.csv";
        rml:referenceFormulation ql:CSV
    	];
 		rr:subjectMap [
        rr:template "http://donostia.eus/linkeddata/id/urumea-martutene-riesgo-{fecha}-{horaParaUri}";
        rr:class lod-medicion:riesgo;
    	]; 
        rr:predicateObjectMap [
        rr:predicate lod:observacion-asociada;
        rr:objectMap [
		rr:parentTriplesMap <#Observacion>;
        ]
        ];                    
        rr:predicateObjectMap [
        rr:predicate purl-measure:obsValue;
        rr:objectMap [
            rml:reference "riesgo";
            rr:language "es";
        ]
        ].

<#NivelAgua>
rml:logicalSource [
		rml:source "CSVToRDFMartutene/newdata/martutene.csv";
        rml:referenceFormulation ql:CSV
    	];
 		rr:subjectMap [
        rr:template "http://donostia.eus/linkeddata/id/urumea-txominenea-nivel-agua-{fecha}-{horaParaUri}";
        rr:class lod-medicion:nivel-agua;
    	];     
        rr:predicateObjectMap [
        rr:predicate lod:observacion-asociada;
        rr:objectMap [
		rr:parentTriplesMap <#Observacion>;
        ]
        ];              
        rr:predicateObjectMap [
        rr:predicate purl-measure:obsValue;
        rr:objectMap [
            rml:reference "nivel";
            rr:datatype xsd:float;
        ]
        ];
        rr:predicateObjectMap [
        rr:predicate purl-attribute:unitMeasure;
        rr:objectMap [
            rr:constant "metros";
        ]
        ].

<#Temperatura>
rml:logicalSource [
		rml:source "CSVToRDFMartutene/newdata/martutene.csv";
        rml:referenceFormulation ql:CSV
    	];
 		rr:subjectMap [
        rr:template "http://donostia.eus/linkeddata/id/urumea-txominenea-temperatura-{fecha}-{horaParaUri}";
        rr:class lod-medicion:temperatura;
    	];
        rr:predicateObjectMap [
        rr:predicate lod:observacion-asociada;
        rr:objectMap [
		rr:parentTriplesMap <#Observacion>;
        ]
        ];
        rr:predicateObjectMap [
        rr:predicate purl-measure:obsValue;
        rr:objectMap [
            rml:reference "temperatura";
            rr:datatype xsd:float;
        ]
        ];
        rr:predicateObjectMap [
        rr:predicate purl-attribute:unitMeasure;
        rr:objectMap [
            rr:constant "metros";
        ]
        ].